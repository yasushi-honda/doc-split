# DocSplit - æ›¸é¡ç®¡ç†ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã‚¢ãƒ—ãƒª

## ã‚¢ãƒ—ãƒªæƒ…å ±
| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ãƒ—ãƒªå | **DocSplit** |
| ã‚¢ã‚¤ã‚³ãƒ³ | `DocSplit_ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³.png`ï¼ˆãƒ­ãƒœãƒƒãƒˆ + æ›¸é¡ï¼‰ |
| ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ | ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ«ãƒ¼ï¼ˆ#1a365d ç³»ï¼‰ |

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
AppSheetã§æ§‹ç¯‰ã•ã‚ŒãŸæ›¸é¡ç®¡ç†ã‚¢ãƒ—ãƒªã‚’GCPã§ãƒªãƒ—ãƒ¬ã‚¤ã‚¹é–‹ç™ºã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚
Gmailã®æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•å–å¾—ã—ã€AI OCRã§ãƒ¡ã‚¿æƒ…å ±ã‚’æŠ½å‡ºã€æ¤œç´¢ãƒ»ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ãƒ»é–²è¦§ãŒå¯èƒ½ãª**æ›¸é¡ç®¡ç†ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã‚¢ãƒ—ãƒª**ã€‚

## ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 8å®Œäº† - **ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãƒ“ãƒ¥ãƒ¼ï¼ˆ1ä¸‡ä»¶å¯¾å¿œï¼‰**

### ç’°å¢ƒæƒ…å ±
| é …ç›® | å€¤ |
|------|-----|
| GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | `doc-split-dev` |
| ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ | `asia-northeast1` |
| GitHubãƒªãƒã‚¸ãƒˆãƒª | `yasushi-honda/doc-split` |
| Storageãƒã‚±ãƒƒãƒˆ | `doc-split-dev-documents` |
| Firestoreã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ | ãƒãƒ¼ãƒˆ `8085` |
| **æœ¬ç•ªURL** | `https://doc-split-dev.web.app` |

### é–‹ç™ºå®Œäº†ã‚µãƒãƒªãƒ¼

| Phase | å®Œäº†æ—¥ | å†…å®¹ |
|-------|--------|------|
| 0 | 01-18 | GCPç’°å¢ƒæ§‹ç¯‰ã€Firebaseé€£æº |
| 1 | 01-18 | Firestoreã‚¹ã‚­ãƒ¼ãƒã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ« |
| 2 | 01-18 | Gmailé€£æºã€OCRå‡¦ç†ï¼ˆGemini 2.5 Flashï¼‰ |
| 3 | 01-18 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆReact + shadcn/uiï¼‰ |
| 4 | 01-18 | PDFåˆ†å‰²ã€ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç·¨é›† |
| 5 | 01-18 | ãƒ†ã‚¹ãƒˆã€æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ã€é‹ç”¨æ‰‹é †æ›¸ |
| 6 | 01-18 | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ç§»è¡Œï¼ˆ132ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ï¼‰ |
| 7 | 01-20 | å‡¦ç†å±¥æ­´ã€åŒå§“åŒåè§£æ±º |
| 8 | 01-22 | ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãƒ“ãƒ¥ãƒ¼ã€æ¤œç´¢æ©Ÿèƒ½ |

**è¿½åŠ å®Ÿè£…ï¼ˆ01-22ã€œ27ï¼‰**: CI/CDã€ãƒ†ãƒŠãƒ³ãƒˆè‡ªå‹•åŒ–ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹å­¦ç¿’ï¼ˆæ›¸é¡ç¨®åˆ¥ãƒ»é¡§å®¢ãƒ»äº‹æ¥­æ‰€ï¼‰ã€ãƒ‰ãƒ¡ã‚¤ãƒ³è¨±å¯ãƒªã‚¹ãƒˆè‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ã€æœ¬ç•ªé‹ç”¨é–‹å§‹

> è©³ç´°ã¯ [docs/context/phase-history.md](docs/context/phase-history.md) ã‚’å‚ç…§

## ä»Šå¾Œã®äºˆå®š
- [ ] ç²¾åº¦æ”¹å–„ï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¾Œï¼‰

## Phase 8ä»¥é™ã®è¿½åŠ å®Ÿè£…ï¼ˆ2026-01-22ã€œ30ï¼‰

<details>
<summary>ã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹ï¼ˆ24é …ç›®å®Œäº†ï¼‰</summary>

| æ—¥ä»˜ | å®Ÿè£…å†…å®¹ |
|------|----------|
| 01-22 | äº‹æ¥­æ‰€åŒåå¯¾å¿œã€æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ |
| 01-24 | CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆåŒåç¢ºèªã€Gmailç›£è¦–UXæ”¹å–„ã€Secret Managerä¸€å…ƒç®¡ç† |
| 01-25 | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€OCRç²¾åº¦ç¢ºèªã€æ‹…å½“ã‚±ã‚¢ãƒãƒè¿½åŠ ã€CORSè¨­å®šã€å·»å–ã‚Šã‚¹ã‚¯ãƒªãƒ—ãƒˆã€OCRç·¨é›†æ©Ÿèƒ½ã€ãƒã‚¹ã‚¿ãƒ¼ç™»éŒ²ææ¡ˆUIã€ãƒã‚¹ã‚¿ãƒ¼æ–°è¦è¿½åŠ æ©Ÿèƒ½ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹å­¦ç¿’æ©Ÿèƒ½ |
| 01-26 | ã‚¨ã‚¤ãƒªã‚¢ã‚¹å­¦ç¿’UIæ‹¡å¼µã€æ¤œç´¢æ©Ÿèƒ½å®Ÿè£… |
| 01-27 | æœ¬ç•ªé‹ç”¨é–‹å§‹ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹å­¦ç¿’UIï¼ˆé¡§å®¢ãƒ»äº‹æ¥­æ‰€è¿½åŠ ï¼‰ã€ãƒ‰ãƒ¡ã‚¤ãƒ³è¨±å¯ãƒªã‚¹ãƒˆã«ã‚ˆã‚‹è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã€**æ¤œç´¢UIçµ±ä¸€ãƒ»æ—¥ä»˜ãƒ‘ãƒ¼ã‚¹å¼·åŒ–** |
| 01-28 | **PDFåˆ†å‰²æ™‚ã®OCRãƒã‚¹ã‚¿ãƒ¼ç…§åˆå¯¾å¿œ**ã€**UIç°¡ç´ åŒ–ï¼ˆç¢ºèªå¾…ã¡æ©Ÿèƒ½å‰Šé™¤â†’å­¦ç¿’å±¥æ­´æ©Ÿèƒ½ã«çµ±åˆï¼‰**ã€**åŒå§“åŒåå¯¾ç­–ï¼ˆnotesè¡¨ç¤ºï¼‰**ã€**PDFå›è»¢ã®æ°¸ç¶šä¿å­˜æ©Ÿèƒ½** |
| 01-30 | **æ‹…å½“CMåˆ¥ãƒ“ãƒ¥ãƒ¼ã«é¡§å®¢ã‚µãƒ–ã‚°ãƒ«ãƒ¼ãƒ—è¡¨ç¤º**ã€ã‚±ã‚¢ãƒãƒã«email/aliasesè¿½åŠ ã€**âš ï¸æœ¬ç•ªãƒ‡ãƒ¼ã‚¿éšœå®³å¾©æ—§**ã€PITR/ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æœ‰åŠ¹åŒ–ï¼ˆADR-0008ï¼‰ã€**ãƒ¢ãƒã‚¤ãƒ«UIæ”¹å–„ï¼ˆãƒ¡ã‚¿æƒ…å ±æŠ˜ã‚ŠãŸãŸã¿ï¼‰**ã€**æ›¸é¡ç¨®åˆ¥æ–°è¦è¿½åŠ æ©Ÿèƒ½**ã€**AIè¦ç´„æ©Ÿèƒ½** |
| 01-31 | **OCRçµæœç¢ºèªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ©Ÿèƒ½**ï¼ˆverified/verifiedBy/verifiedAtï¼‰ã€ä¸€è¦§ç”»é¢ã«æœªç¢ºèªãƒãƒƒã‚¸ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€é–‰ã˜ã‚‹ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã€**OCRå‡¦ç†ãƒ•ãƒ­ãƒ¼æ”¹å–„**ï¼ˆFirestoreãƒˆãƒªã‚¬ãƒ¼å³æ™‚å‡¦ç†ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UXæ”¹å–„ï¼‰ã€**æ›¸é¡æ—¥ä»˜æŠ½å‡ºã®1ãƒšãƒ¼ã‚¸ç›®å„ªå…ˆãƒ­ã‚¸ãƒƒã‚¯**ã€**ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°**ã€**ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †æ”¹å–„**ï¼ˆ--rulesã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ ï¼‰ |

</details>

## ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒ

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒã¯ `.firebaserc` ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
1. `scripts/setup-tenant.sh <project-id> <admin-email>` ã§ãƒ†ãƒŠãƒ³ãƒˆåˆæœŸè¨­å®š
2. `scripts/setup-gmail-auth.sh <project-id>` ã§Gmailèªè¨¼è¨­å®š
3. `scripts/deploy-to-project.sh <alias>` ã§ãƒ‡ãƒ—ãƒ­ã‚¤

è©³ç´°ã¯ `docs/context/delivery-and-update-guide.md` å‚ç…§ã€‚

### ç’°å¢ƒãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
- `.firebaserc`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹å®šç¾©
- `frontend/.env.<alias>`: å„ç’°å¢ƒã®Firebaseè¨­å®š

## å®Œäº†ã—ãŸã‚¤ãƒ³ãƒ•ãƒ©è¨­å®šï¼ˆ2026-01-19ï¼‰
- [x] ã‚³ã‚¹ãƒˆç›£è¦–ãƒ»äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆæœˆé¡3,000å††ã€50%/80%/100%é–¾å€¤ï¼‰
- [x] Cloud Monitoring ã‚¨ãƒ©ãƒ¼é€šçŸ¥è¨­å®šï¼ˆCloud Functions/Vertex AIï¼‰
- [x] ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãƒãƒ£ãƒãƒ«è¨­å®šï¼ˆhy.unimail.11@gmail.comï¼‰
- [x] Gmailé€£æºãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆOAuth 2.0æ–¹å¼ï¼‰
  - Secret Managerè¨­å®šä¿®æ­£ï¼ˆgmail-oauth-client-secret, gmail-oauth-refresh-tokenï¼‰
  - gmailAuth.ts: Cloud Functions 2nd genç’°å¢ƒå¤‰æ•°å¯¾å¿œï¼ˆGOOGLE_CLOUD_PROJECTï¼‰
  - E2Eå‹•ä½œç¢ºèªï¼ˆcheckGmailAttachmentsæ­£å¸¸å®Ÿè¡Œï¼‰

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆï¼ˆAIå‘ã‘ï¼‰

### å½¹å‰²åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | ç”¨é€” | å¯¾è±¡ |
|-------------|------|------|
| `docs/context/` | **é–‹ç™ºç”¨è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆãƒã‚¹ã‚¿ãƒ¼ï¼‰** | AI/é–‹ç™ºè€… |
| `docs/adr/` | ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šè¨˜éŒ² | AI/é–‹ç™ºè€… |
| `docs/operation/` | é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè©³ç´° | ç´å“å…ˆç®¡ç†è€… |
| `docs/ç›´ä¸‹` | GitHub Pageså…¬é–‹ç”¨ï¼ˆç°¡ç•¥ç‰ˆï¼‰ | å¤–éƒ¨å‘ã‘ |
| `docs/reference/` | æ—§ã‚·ã‚¹ãƒ†ãƒ å‚ç…§è³‡æ–™ï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰ | å¿…è¦æ™‚ã®ã¿ |

### èª­è¾¼å„ªå…ˆé †åº
1. `docs/context/gcp-migration-scope.md` - ç§»è¡Œã‚¹ã‚³ãƒ¼ãƒ— â˜…æœ€é‡è¦
2. `docs/context/functional-requirements.md` - æ©Ÿèƒ½è¦ä»¶
3. `docs/context/implementation-plan.md` - å®Ÿè£…è¨ˆç”»ï¼ˆå„Phaseå®Œäº†æ¡ä»¶ä»˜ãï¼‰
4. `docs/context/data-model.md` - ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆFirestoreã‚¹ã‚­ãƒ¼ãƒï¼‰
5. `docs/context/delivery-and-update-guide.md` - ç´å“ãƒ»ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆé‹ç”¨ â˜…é‹ç”¨æ™‚å¿…èª­
6. `docs/context/error-handling-policy.md` - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
7. `docs/context/gemini-rate-limiting.md` - Geminiãƒ¬ãƒ¼ãƒˆåˆ¶é™
8. `docs/context/business-logic.md` - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
9. `docs/adr/` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šè¨˜éŒ²

**æ³¨æ„**: `docs/ç›´ä¸‹`ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆdata-model.mdç­‰ï¼‰ã¯GitHub Pagesç”¨ã®ç°¡ç•¥ç‰ˆã€‚AIé–‹ç™ºæ™‚ã¯`docs/context/`ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã€‚

## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼
cd frontend && npm run dev

# Firebaseã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•
firebase emulators:start

# å…¨ä½“ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build
```

### ãƒ†ã‚¹ãƒˆ
```bash
# Functionså˜ä½“ãƒ†ã‚¹ãƒˆ
cd functions && npm test

# Firestoreãƒ«ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
cd functions && npm run test:rules

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
cd frontend && npm test
```

### ãƒ‡ãƒ—ãƒ­ã‚¤

**é‡è¦**: ãƒãƒ«ãƒç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã¯å¿…ãšã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã€‚
æ‰‹å‹•ã§`firebase deploy`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`.env.local`ã®è¨­å®šãŒä½¿ã‚ã‚Œã¦èª¤ã£ãŸç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹å±é™ºãŒã‚ã‚‹ã€‚

```bash
# ãƒãƒ«ãƒç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ¨å¥¨ï¼‰
./scripts/deploy-to-project.sh dev           # Hostingã®ã¿
./scripts/deploy-to-project.sh <alias>       # Hostingã®ã¿
./scripts/deploy-to-project.sh <alias> --rules  # Hosting + ãƒ«ãƒ¼ãƒ«ï¼ˆâ˜…ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´æ™‚å¿…é ˆï¼‰
./scripts/deploy-to-project.sh <alias> --full   # å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

# Functionsã®ã¿ï¼ˆç’°å¢ƒå¤‰æ•°ã«ä¾å­˜ã—ãªã„ãŸã‚ç›´æ¥å®Ÿè¡ŒOKï¼‰
firebase deploy --only functions -P dev
firebase deploy --only functions -P <alias>

# ãƒ«ãƒ¼ãƒ«ã®ã¿ï¼ˆåŒä¸Šï¼‰
firebase deploy --only firestore:rules,storage -P dev
firebase deploy --only firestore:rules,storage -P <alias>
```

**âš ï¸ ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡ã®åˆ¤æ–­ï¼ˆAIå‘ã‘å¿…èª­ï¼‰**:
| å¤‰æ›´å†…å®¹ | ã‚³ãƒãƒ³ãƒ‰ |
|---------|---------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿ | `./scripts/deploy-to-project.sh <alias>` |
| **Firestoreã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´** | `./scripts/deploy-to-project.sh <alias> --rules` |
| Functionså¤‰æ›´ | `./scripts/deploy-to-project.sh <alias> --full` |

**ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã®ä¾‹**: æ–°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆverifiedç­‰ï¼‰ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ¨©é™å¤‰æ›´ã€æ–°ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 

### ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
frontend/
â”œâ”€â”€ .env.dev          # devç’°å¢ƒè¨­å®šï¼ˆå›ºå®šï¼‰
â”œâ”€â”€ .env.<alias>      # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒè¨­å®šï¼ˆã‚¨ã‚¤ãƒªã‚¢ã‚¹ã”ã¨ã«ä½œæˆï¼‰
â”œâ”€â”€ .env.local        # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ï¼ˆé€šå¸¸devè¨­å®šï¼‰
â””â”€â”€ .env.example      # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```

**æ³¨æ„**: Viteã¯`.env.local`ã‚’æœ€å„ªå…ˆã§èª­ã¿è¾¼ã‚€ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯è‡ªå‹•ã§æ­£ã—ã„è¨­å®šã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚

### ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
```bash
# ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
node scripts/import-masters.js --file scripts/samples/customers.csv --type customers
```

## ç¢ºå®šäº‹é …
| ã‚«ãƒ†ã‚´ãƒª | é¸å®š |
|---------|------|
| OCRã‚¨ãƒ³ã‚¸ãƒ³ | Vertex AI Gemini 2.5 Flash (asia-northeast1) |
| ã‚µãƒ¼ãƒ“ã‚¹é–“èªè¨¼ | Workload Identity |
| ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆ | Cloud Functions (2nd gen) |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ | Firebase Authentication (Google Login) |
| Gmailé€£æº | Service Account + Domain-wide Delegation |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | Firebase Hosting + React + Vite + TypeScript |
| UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª | shadcn/ui + Tailwind CSS |
| PDFãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ | react-pdf (pdf.js) |
| çŠ¶æ…‹ç®¡ç† | Zustand + TanStack Query |
| ç´å“å½¢æ…‹ | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ–¹å¼ï¼ˆé››å½¢ãªã—ï¼‰ |

**Artifact Registryã¯ä¸è¦**ï¼ˆFirebase Hosting + Cloud Functionsã‚½ãƒ¼ã‚¹ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãŸã‚ï¼‰

## ãƒãƒ«ãƒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé‹ç”¨

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–¹é‡

```
[doc-split-dev]          [client-a]          [client-b]
  é–‹ç™ºãƒ»æ¤œè¨¼        â†’      æœ¬ç•ªA        â†’      æœ¬ç•ªB
  (SEEDã‚ã‚Š)             (SEEDãªã—)          (SEEDãªã—)
```

### .firebasercæ§‹æˆ

```json
{
  "projects": {
    "dev": "doc-split-dev",
    "client-a": "<client-a-project-id>",
    "client-b": "<client-b-project-id>"
  }
}
```

### é‹ç”¨ãƒ•ãƒ­ãƒ¼

| ãƒ•ãƒ­ãƒ¼ | æ‰‹é † |
|--------|------|
| åˆæœŸç´å“ | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆGCPä½œæˆ â†’ setup-tenant.sh â†’ ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ |
| ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ | dev ã§æ¤œè¨¼ â†’ `firebase deploy -P client-a` â†’ `-P client-b` |
| æ–°è¦è¿½åŠ  | setup-tenant.sh â†’ .firebasercã«è¿½åŠ  |

**è©³ç´°**: `docs/context/delivery-and-update-guide.md` å‚ç…§

### âš ï¸ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®é‡è¦æ³¨æ„ç‚¹

**æ ¹æœ¬åŸå› ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç§»è¡Œæ™‚ã®æ•™è¨“ï¼‰**:
- ä»•æ§˜ã®ã€Œå”¯ä¸€ã®å‚ç…§å…ƒã€ãŒãªãæ‰‹ä½œæ¥­ã§æ¨æ¸¬
- ç’°å¢ƒå·®åˆ†ï¼ˆæœ¬ç•ª/æ¤œè¨¼ï¼‰ã®ã‚¬ãƒ¼ãƒ‰ä¸è¶³
- å®Ÿè£…ä»•æ§˜ã¨é‹ç”¨æ‰‹é †ã®ä¹–é›¢

1. **`.env.local` ã®å„ªå…ˆé †ä½å•é¡Œ**
   - Viteã¯ `.env.local` ã‚’ `.env` ã‚ˆã‚Šå„ªå…ˆ
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒã¸ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã¯å¿…ãš `.env.local` ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
   ```bash
   cp frontend/.env.<ç’°å¢ƒå> frontend/.env.local
   rm -rf frontend/dist && npm run build
   firebase deploy -P <ç’°å¢ƒå> --only hosting
   cp frontend/.env.dev frontend/.env.local  # å¾©å…ƒ
   ```

2. **ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²**
   - ç™»éŒ²å…ˆ: `users` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ`allowedUsers` ã§ã¯ãªã„ï¼‰
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID: Firebase Auth UIDï¼ˆemailã§ã¯ãªã„ï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸€åº¦ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œå¾Œã«ç™»éŒ²å¯èƒ½ï¼ˆAuth UIDãŒå¿…è¦ãªãŸã‚ï¼‰

3. **auth/unauthorized-domain å¯¾å¿œ**
   - Firebase Console â†’ Authentication â†’ Authorized domains
   - GCP Console â†’ OAuth 2.0 Client â†’ JavaScript origins + Redirect URIs

4. **æœ¬ç•ªç’°å¢ƒã¸ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ç¦æ­¢**
   - æœ¬ç•ªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã¯ã€Œãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãªã—ã€ã‚’é¸æŠ
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰å®Ÿéš›ã®CSVã‚’å—é ˜ã—ã¦ã‹ã‚‰æŠ•å…¥
   - é–‹ç™º/æ¤œè¨¼ç’°å¢ƒã®ã¿ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨å¯
   - **æ³¨æ„**: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¯ `masters/{type}/items` ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¿å­˜
     - `masters/customers/items` - é¡§å®¢
     - `masters/documents/items` - æ›¸é¡ç¨®åˆ¥ï¼ˆdocumentTypesã§ã¯ãªã„ï¼‰
     - `masters/offices/items` - äº‹æ¥­æ‰€
     - `masters/caremanagers/items` - ã‚±ã‚¢ãƒãƒï¼ˆå°æ–‡å­—ï¼‰

5. **ãƒ‰ãƒ¡ã‚¤ãƒ³è¨±å¯ãƒªã‚¹ãƒˆã«ã‚ˆã‚‹è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³**
   - `settings/auth.allowedDomains` ã«è¨±å¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®š
   - `setup-tenant.sh` ã¯ç®¡ç†è€…ãƒ¡ãƒ¼ãƒ«ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿è‡ªå‹•è¨­å®š
   - è¿½åŠ ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒå¿…è¦ãªå ´åˆ:
     ```bash
     node scripts/check-allowed-domains.js <project-id> --add <domain>
     # ä¾‹: node scripts/check-allowed-domains.js docsplit-kanameone --add kanameone.com
     ```
   - **2026-01-30ä¿®æ­£**: Firestoreãƒ«ãƒ¼ãƒ«ã®ãƒã‚°ã§æ–°è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„å•é¡Œã‚’ä¿®æ­£æ¸ˆã¿

6. **ğŸš¨ Firestoreãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã®çµ¶å¯¾ç¦æ­¢äº‹é …ï¼ˆADR-0008ï¼‰**
   - **çµ¶å¯¾ã«å®Ÿè¡Œã—ã¦ã¯ã„ã‘ãªã„ã‚³ãƒãƒ³ãƒ‰**:
     ```bash
     # æœ¬ç•ªç’°å¢ƒã§ä»¥ä¸‹ã¯çµ¶å¯¾ç¦æ­¢
     firebase firestore:delete --all-collections
     firebase firestore:delete / --recursive
     ```
   - **è¨±å¯ã•ã‚Œã‚‹å‰Šé™¤æ“ä½œ**ï¼ˆç‰¹å®šã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿ï¼‰:
     ```bash
     firebase firestore:delete documents --recursive -P <alias>
     ```
   - **å‰Šé™¤å‰ã®å¿…é ˆç¢ºèª**:
     - [ ] å‰Šé™¤å¯¾è±¡ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åã‚’3å›ç¢ºèª
     - [ ] `--all-collections` ã¯çµ¶å¯¾ã«ä½¿ã‚ãªã„
     - [ ] æœ¬ç•ªç’°å¢ƒã§ã‚ã‚‹ã“ã¨ã‚’èªè­˜
   - **2026-01-30æ•™è¨“**: æœ¬ç•ªç’°å¢ƒã§ `--all-collections` ã‚’èª¤å®Ÿè¡Œã—ã€ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–ªå¤±ã€‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»PITRæœªè¨­å®šã®ãŸã‚å¾©å…ƒä¸å¯èƒ½ã¨ãªã£ãŸã€‚

**ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆè©³ç´°**: `docs/operation/setup-guide.md` å‚ç…§

## ç¢ºå®šã—ãŸç›¸è«‡äº‹é …
| é …ç›® | æ±ºå®šå†…å®¹ |
|------|----------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UI | Firebase Hosting + React SPA |
| ã‚³ã‚¹ãƒˆä¸Šé™ | æœˆé¡3,000å††ä»¥ä¸‹ |
| Gmailé€£æº | é–‹ç™º: OAuth 2.0ã€æœ¬ç•ª: Service Account + Delegation |
| ç›£è¦–å¯¾è±¡ãƒ¡ãƒ¼ãƒ« | è¨­å®šç”»é¢ã§æŒ‡å®šå¯èƒ½ï¼ˆé–‹ç™ºç”¨: `hy.unimail.11@gmail.com`ï¼‰ |
| ãƒ­ã‚°ã‚¤ãƒ³è¨±å¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆæ–¹å¼ï¼ˆè¨­å®šç”»é¢ã§ç®¡ç†ã€ç®¡ç†ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚ã‚Šï¼‰ |
| ç´å“å½¢æ…‹ | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆGCPä½œæˆ â†’ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œï¼ˆé››å½¢ãªã—æ–¹å¼ï¼‰ |

## æŠ€è¡“é¸å®šï¼ˆå…¨ç¢ºå®šï¼‰
| é …ç›® | é¸å®š | ç†ç”± |
|------|------|------|
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | **Firestore** | ç„¡æ–™æ ã§ååˆ†ã€Firebaseçµ±åˆ |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | **Cloud Storage** | Cloud Functionsé€£æºãŒãƒ¡ã‚¤ãƒ³ |
| VPC Service Controls | **ä¸è¦** | ã‚³ã‚¹ãƒˆåˆ¶ç´„ã€ã‚¢ãƒ—ãƒªå±¤ã§æ‹…ä¿ |

## æœ¬ç•ªç’°å¢ƒæƒ…å ±
| é …ç›® | URL/æƒ…å ± |
|------|----------|
| ã‚¢ãƒ—ãƒªURL | `https://doc-split-dev.web.app` |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | `https://yasushi-honda.github.io/doc-split/` |
| Firebase Console | `https://console.firebase.google.com/project/doc-split-dev` |
| GCP Console | `https://console.cloud.google.com/home/dashboard?project=doc-split-dev` |
| Functions Logs | `https://console.firebase.google.com/project/doc-split-dev/functions/logs` |

### ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿Cloud Functions
| é–¢æ•°å | ãƒˆãƒªã‚¬ãƒ¼ | èª¬æ˜ |
|--------|----------|------|
| checkGmailAttachments | Scheduled (5åˆ†é–“éš”) | Gmailæ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«å–å¾— |
| processOCR | Scheduled (1åˆ†é–“éš”) | AI OCRå‡¦ç† |
| getOcrText | Callable | OCRå…¨æ–‡å–å¾— |
| detectSplitPoints | Callable | PDFåˆ†å‰²å€™è£œæ¤œå‡º |
| splitPdf | Callable | PDFåˆ†å‰²å®Ÿè¡Œ |
| rotatePdfPages | Callable | PDFãƒšãƒ¼ã‚¸å›è»¢ |
| uploadPdf | Callable | ãƒ­ãƒ¼ã‚«ãƒ«PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |
| deleteDocument | Callable | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‰Šé™¤ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰ |
| searchDocuments | Callable | å…¨æ–‡æ¤œç´¢ |
| onDocumentWriteSearchIndex | Trigger | æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è‡ªå‹•æ›´æ–° |

### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é‡è¤‡ãƒã‚§ãƒƒã‚¯ä»•æ§˜
- **ãƒã‚§ãƒƒã‚¯æ–¹å¼**: ãƒ•ã‚¡ã‚¤ãƒ«åãƒ™ãƒ¼ã‚¹ï¼ˆåŒåãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ï¼‰
- **é‡è¤‡æ¤œå‡ºæ™‚**: ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§åˆ¥åä¿å­˜ã‚’ææ¡ˆï¼ˆä¾‹: `file.pdf` â†’ `file_2.pdf`ï¼‰
- **åˆ†å‰²å…ƒã®æ‰±ã„**: `isSplitSource=true` ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‹ã‚‰é™¤å¤–
- **Gmailå–ã‚Šè¾¼ã¿**: MD5ãƒãƒƒã‚·ãƒ¥ã§é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆè‡ªå‹•å‡¦ç†ã®ãŸã‚ï¼‰

### æ¤œç´¢æ©Ÿèƒ½ä»•æ§˜
- **æ¤œç´¢æ–¹å¼**: åè»¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + TF-IDF ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
- **æ¤œç´¢å¯¾è±¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**ï¼ˆFIELD_WEIGHTSï¼‰:
  - customerNameï¼ˆé¡§å®¢åï¼‰: é‡ã¿3
  - officeNameï¼ˆäº‹æ¥­æ‰€åï¼‰: é‡ã¿2
  - documentTypeï¼ˆæ›¸é¡ç¨®åˆ¥ï¼‰: é‡ã¿2
  - careManagerï¼ˆã‚±ã‚¢ãƒãƒï¼‰: é‡ã¿1
  - fileNameï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åï¼‰: é‡ã¿1
- **æ¤œç´¢å¯¾è±¡å¤–**: processedAtï¼ˆç™»éŒ²æ—¥ï¼‰ã€fileDateï¼ˆæ›¸é¡æ—¥ä»˜ï¼‰ã€ocrResultï¼ˆOCRçµæœï¼‰
- **æ—¥ä»˜æ¤œç´¢**: ã€Œ2024/1ã€ã€ŒR6.1ã€ãªã©ã®æ—¥ä»˜ãƒ‘ãƒ¼ã‚¹ã§ fileDate ã‚’æ¤œç´¢å¯èƒ½
- **ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚º**: bi-gram + ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º

## è¨­è¨ˆå®Œäº†æ¸ˆã¿
- [x] ç§»è¡Œã‚¹ã‚³ãƒ¼ãƒ—å®šç¾©
- [x] æ©Ÿèƒ½è¦ä»¶å®šç¾©ï¼ˆP0/P1/P2ï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆFirestoreã‚¹ã‚­ãƒ¼ãƒï¼‰
- [x] èªè¨¼è¨­è¨ˆï¼ˆFirebase Auth + ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ + Gmailç’°å¢ƒåˆ‡æ›¿ï¼‰
- [x] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆï¼ˆReact + shadcn/uiï¼‰
- [x] å®Ÿè£…è¨ˆç”»ï¼ˆ5ãƒ•ã‚§ãƒ¼ã‚º + å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼‰
- [x] å…ƒã‚·ã‚¹ãƒ†ãƒ çŸ¥è¦‹ã®åæ˜ 
- [x] ç´å“æº–å‚™è¨­è¨ˆï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆï¼‰
- [x] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒãƒªã‚·ãƒ¼
- [x] Geminiãƒ¬ãƒ¼ãƒˆåˆ¶é™è¨­è¨ˆ
- [x] ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿CSVã‚µãƒ³ãƒ—ãƒ«

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
doc-split/
â”œâ”€â”€ CLAUDE.md                    # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ package.json                 # ãƒ¢ãƒãƒ¬ãƒãƒ«ãƒ¼ãƒˆ
â”œâ”€â”€ firebase.json                # Firebaseè¨­å®š
â”œâ”€â”€ firestore.rules              # Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ storage.rules                # Storageã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ frontend/                    # Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/          # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn/ui
â”‚   â”‚   â”‚   â”œâ”€â”€ PdfViewer.tsx    # PDFãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentDetailModal.tsx  # è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ PdfSplitModal.tsx    # PDFåˆ†å‰²ãƒ¢ãƒ¼ãƒ€ãƒ« â˜…Phase 4
â”‚   â”‚   â”‚   â””â”€â”€ Layout.tsx       # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/               # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ useDocuments.ts  # Firestoreæ›¸é¡é€£æº
â”‚   â”‚   â”‚   â”œâ”€â”€ useSettings.ts   # è¨­å®šãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ useErrors.ts     # ã‚¨ãƒ©ãƒ¼å±¥æ­´é€£æº
â”‚   â”‚   â”‚   â”œâ”€â”€ usePdfSplit.ts   # PDFåˆ†å‰²é€£æº
â”‚   â”‚   â”‚   â””â”€â”€ useMasters.ts    # ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿CRUD â˜…Phase 4
â”‚   â”‚   â”œâ”€â”€ pages/               # å„ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentsPage.tsx    # æ›¸é¡ä¸€è¦§
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.tsx     # è¨­å®šç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorsPage.tsx       # ã‚¨ãƒ©ãƒ¼å±¥æ­´
â”‚   â”‚   â”‚   â”œâ”€â”€ MastersPage.tsx      # ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç·¨é›† â˜…Phase 4
â”‚   â”‚   â”‚   â””â”€â”€ LoginPage.tsx        # ãƒ­ã‚°ã‚¤ãƒ³
â”‚   â”‚   â”œâ”€â”€ stores/              # Zustand
â”‚   â”‚   â””â”€â”€ lib/                 # Firebase SDKç­‰
â”‚   â”œâ”€â”€ components.json          # shadcn/uiè¨­å®š â˜…Phase 3
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ functions/                   # Cloud Functions
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ gmail/               # checkGmailAttachments
â”‚   â”‚   â”œâ”€â”€ ocr/                 # processOCR
â”‚   â”‚   â”œâ”€â”€ pdf/                 # pdfOperationsï¼ˆåˆ†å‰²ãƒ»å›è»¢ï¼‰
â”‚   â”‚   â””â”€â”€ utils/               # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚       â”œâ”€â”€ retry.ts         # ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
â”‚   â”‚       â”œâ”€â”€ errorLogger.ts   # ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
â”‚   â”‚       â”œâ”€â”€ gmailAuth.ts     # Gmailèªè¨¼åˆ‡æ›¿
â”‚   â”‚       â”œâ”€â”€ rateLimiter.ts   # Geminiãƒ¬ãƒ¼ãƒˆåˆ¶é™
â”‚   â”‚       â”œâ”€â”€ similarity.ts    # é¡ä¼¼åº¦ãƒãƒƒãƒãƒ³ã‚°
â”‚   â”‚       â”œâ”€â”€ textNormalizer.ts    # ãƒ†ã‚­ã‚¹ãƒˆæ­£è¦åŒ– â˜…Phase 6A
â”‚   â”‚       â”œâ”€â”€ extractors.ts        # æƒ…å ±æŠ½å‡º â˜…Phase 6B
â”‚   â”‚       â”œâ”€â”€ fileNaming.ts        # ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆ â˜…Phase 6C
â”‚   â”‚       â””â”€â”€ pdfAnalyzer.ts       # PDFåˆ†æ â˜…Phase 6D
â”‚   â”œâ”€â”€ test/                    # ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ firestore.rules.test.ts  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ similarity.test.ts       # é¡ä¼¼åº¦ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ textNormalizer.test.ts   # ãƒ†ã‚­ã‚¹ãƒˆæ­£è¦åŒ–ãƒ†ã‚¹ãƒˆ â˜…Phase 6A
â”‚   â”‚   â”œâ”€â”€ extractors.test.ts       # æƒ…å ±æŠ½å‡ºãƒ†ã‚¹ãƒˆ â˜…Phase 6B
â”‚   â”‚   â”œâ”€â”€ fileNaming.test.ts       # ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆãƒ†ã‚¹ãƒˆ â˜…Phase 6C
â”‚   â”‚   â””â”€â”€ pdfAnalyzer.test.ts      # PDFåˆ†æãƒ†ã‚¹ãƒˆ â˜…Phase 6D
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ scripts/                     # ã‚µãƒãƒ¼ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ init-project.sh          # é¡§å®¢å›ºæœ‰è¨­å®šã®å¤‰æ›´
â”‚   â”œâ”€â”€ import-masters.js        # ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ï¼ˆCLIï¼‰
â”‚   â””â”€â”€ samples/                 # CSVã‚µãƒ³ãƒ—ãƒ« â˜…NEW
â”‚       â”œâ”€â”€ customers.csv
â”‚       â”œâ”€â”€ documents.csv
â”‚       â”œâ”€â”€ offices.csv
â”‚       â””â”€â”€ caremanagers.csv
â”œâ”€â”€ shared/                      # å…±é€šå‹å®šç¾©
â”‚   â””â”€â”€ types.ts
â””â”€â”€ docs/
    â”œâ”€â”€ context/
    â”‚   â”œâ”€â”€ gcp-migration-scope.md
    â”‚   â”œâ”€â”€ functional-requirements.md
    â”‚   â”œâ”€â”€ implementation-plan.md      # å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆä»˜ã
    â”‚   â”œâ”€â”€ data-model.md
    â”‚   â”œâ”€â”€ delivery-and-update-guide.md  # ç´å“ãƒ»ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆé‹ç”¨ â˜…NEW
    â”‚   â”œâ”€â”€ business-logic.md
    â”‚   â”œâ”€â”€ error-handling-policy.md
    â”‚   â””â”€â”€ gemini-rate-limiting.md
    â”œâ”€â”€ operation/                      # é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ â˜…Phase 5
    â”‚   â”œâ”€â”€ user-guide.md               # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰
    â”‚   â”œâ”€â”€ admin-guide.md              # ç®¡ç†è€…ã‚¬ã‚¤ãƒ‰
    â”‚   â””â”€â”€ setup-guide.md              # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †æ›¸
    â”œâ”€â”€ adr/
    â”‚   â”œâ”€â”€ 0001-tech-stack-selection.md
    â”‚   â”œâ”€â”€ 0002-security-design.md
    â”‚   â”œâ”€â”€ 0003-authentication-design.md
    â”‚   â””â”€â”€ 0004-frontend-architecture.md
    â””â”€â”€ reference/
        â”œâ”€â”€ gas-source/                 # GASã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆè¦ã‚¯ãƒ­ãƒ¼ãƒ³ï¼‰
        â””â”€â”€ *.md                        # æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```
