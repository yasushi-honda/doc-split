# ハンドオフメモ

**更新日**: 2026-02-07
**ブランチ**: main（クリーン）
**フェーズ**: Phase 8完了 + 追加実装

## 直近の変更（02-06〜07）

| PR/コミット | 内容 |
|----|------|
| 1b67b2f | **納品ページ改善+ADR-0009** - 最小版に禁止事項追加、アップデート手順セクション追加、Feature Flags方針ADR |
| 907b2be | **納品ページの前提条件・事前準備手順を補完**（Node.js/Firebase CLI/npm install追加、OAuth同意画面ステップ追加） |
| bd66bfe | **納品ページの前提条件にOS要件（macOS/Linux/WSL）追加** |
| #66 | **OAuth OOB→loopback方式移行+納品ページ改善**（setup-gmail-auth.sh/docs） |
| 7ea4e65 | **Claude Code自動納品プロンプトジェネレーターページ追加**（GitHub Pages） |
| 59a027f | **deploy-all-clients.shに非対話モード(--yes)追加**＋Node.js v24互換修正 |
| #65 | **setup-tenant.sh/setup-gmail-auth.shに非対話モード追加** |
| #64 | **納品フロードキュメントのコマンド記載を実スクリプト引数に修正** |
| #63 | フィルターパネル全タブ共通化＋期間指定フィルター追加 |
| #61-62 | あかさたなフィルター＋バグ修正 |
| #57-60 | 一覧系画面の初期表示100件化＋無限スクロール対応 |

### 技術的なポイント（1b67b2f 本セッション）

- **納品ページ改善**: 最小版プロンプトに禁止事項（`--all-collections`禁止等）を追加、「次回以降のアップデート」セクション追加
- **ADR-0009**: クライアント別オプション機能をFeature Flags（`settings/features`）で管理する方針を記録
  - 全クライアントに同一コードをデプロイ、オプションはFirestoreフラグでON/OFF
  - Super Admin（dev上）から各クライアントの機能を中央管理
  - 課金に応じてオプション有効化するビジネスモデル
  - 複雑化時はストラテジーパターンに移行

### Claude Code納品フロー（完成状態）

- GitHub Pages: `https://yasushi-honda.github.io/doc-split/#/claude-code-delivery`
- フォーム入力→プロンプト自動生成→コピー→Claude Codeに貼付けで全自動納品
- 人間の作業: OAuth同意画面設定 + クライアントID作成 + 認証コード取得（loopback方式）のみ
- 検証済み: スクリプト引数・前提条件・禁止事項すべて正確に記載

## デプロイ状況

| 環境 | 状態 |
|------|------|
| dev | デプロイ済み（02-06、e554641反映）※以降はドキュメント/スクリプト変更のみ |
| kanameone | デプロイ済み（02-06、e554641反映） |

## 未解決の既知バグ

なし

## 次のアクション候補（優先度順）

1. **クライアント別オプション機能の実装**（最初の具体的要望確定時）→ ADR-0009参照
2. 精度改善（フィードバック後）
3. Playwright E2Eテスト拡充
4. ドキュメント監査残課題（優先度中以下）→ docs/audit/2026-02-06-document-audit.md 参照
