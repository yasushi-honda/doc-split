# DocSplit 設計レビューサマリ

**作成日**: 2026-01-18
**ステータス**: アーカイブ（実装完了済み、2026-02-22）

---

## 概要

AppSheetで構築された書類管理アプリをGCPでリプレイス。
Gmail添付ファイルを自動取得し、AI OCRで解析、検索・閲覧が可能なWebアプリケーション。

---

## 確定済み技術スタック

| 項目 | 選定 |
|------|------|
| OCR | **Vertex AI Gemini 2.5 Flash**（東京リージョン） |
| データベース | **Firestore** |
| ストレージ | **Cloud Storage** |
| バックエンド | **Cloud Functions (2nd gen)** |
| フロントエンド | **Firebase Hosting + React** |
| 認証 | **Firebase Authentication**（Googleログイン） |
| Gmail連携 | **Gmail API + Pub/Sub** |

---

## 機能一覧（優先度別）

### P0: Must Have（MVP）
- Gmail添付ファイル自動取得（ラベル指定）
- AI OCR処理（書類名・顧客名・日付自動抽出）
- ファイル自動リネーム
- 書類一覧・検索・フィルター
- PDFビューアー
- ユーザー認証（ホワイトリスト方式）

### P1: Should Have
- PDF分割（OCRベース区切り検出）
- メタ情報手動編集
- エラー一覧・再処理

### P2: Nice to Have
- PDF回転補正
- ダウンロード（個別/一括）
- 処理統計ダッシュボード

---

## 実装フェーズ（5段階 + 納品準備）

| Phase | 内容 |
|-------|------|
| 0 | 環境構築・認証設定 |
| 1 | Firestore + Cloud Storage基盤 |
| 2 | Gmail連携（5分ポーリング） + OCR処理 |
| 3 | フロントエンド（書類一覧・ビューアー） |
| 4 | 管理画面 + PDF分割 |
| 5 | テスト・デプロイ |
| - | **納品準備**（スクリプト・ドキュメント） |

---

## コスト見積もり

| 項目 | 月額見積もり |
|------|-------------|
| Firebase Hosting | 無料枠内 |
| Firestore | 無料枠内 |
| Cloud Functions | 無料枠内 |
| Cloud Storage | 無料枠内 |
| Vertex AI Gemini | 〜2,000円 |
| **合計** | **〜2,000円/月** |

> 目標: 月額3,000円以下 ✓

---

## 納品形態

| 項目 | 内容 |
|------|------|
| 形態 | **GCPプロジェクト移譲**（シングルテナント） |
| ベース | 自社マスタープロジェクトをコピー |
| 初期設定 | サポート対応（顧客固有設定のみ変更） |
| データ登録 | サポート対応（マスターデータ投入） |
| サポート | 保守契約による継続サポート |

### 納品フロー
```
マスタープロジェクト → コピー → 初期設定 → データ登録 → 移譲
                      （すべてサポート対応）
```

### 顧客固有設定（変更項目）
- 監視対象Gmailラベル
- 管理者メールアドレス
- 初期ユーザー（ホワイトリスト）

---

## 確認事項

以下の設計内容についてご確認ください：

1. **機能範囲**: P0/P1/P2の優先度は適切か？
2. **認証方式**: ホワイトリスト管理で問題ないか？
3. **Gmail連携**: 監視ラベルの設定UIで十分か？
4. **データ保持**: 書類データの保持期間制限は必要か？

---

## 詳細ドキュメント

| ドキュメント | 説明 |
|-------------|------|
| `context/gcp-migration-scope.md` | 移行スコープ全体 |
| `context/functional-requirements.md` | 機能要件詳細 |
| `context/implementation-plan.md` | 実装計画・依存関係 |
| `context/data-model.md` | Firestoreスキーマ |
| `adr/` | アーキテクチャ決定記録 |

---

## 次のアクション

レビュー完了後：
1. Phase 0（環境構築）着手
2. マスターデータ移行準備
3. 開発環境セットアップ
